import{a as _,A as L,b as T,j as e,as as W,r,G as a,J as c,d as E,at as I,t as C}from"./main-CFWUZTJd.js";function x(s){return s?s<10?"0"+s:""+s:"00"}const V=async s=>await(await _({url:L+"/api/v1/adjust/result",method:"post",headers:{Authorization:"Bearer "+T.get("access_token")},data:{...s}})).data,M=s=>{const{countdown:d}=s,l=n=>{const u=Math.floor(n/3600),o=Math.floor(n%3600/60),h=Math.floor(n%60);return e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10},children:[e.jsx("div",{style:{padding:5,background:"white",borderRadius:4,width:28,height:28,border:"1px solid #2e89ff"},children:x(u)}),e.jsx("div",{style:{padding:5,background:"white",borderRadius:4,width:28,height:28,border:"1px solid #2e89ff"},children:x(o)}),e.jsx("div",{style:{padding:5,background:"white",borderRadius:4,width:28,height:28,border:"1px solid #2e89ff"},children:x(h)})]})};return e.jsx(e.Fragment,{children:l(d)})};function q(){const s=W(),[d,l]=r.useState(),[n,u]=r.useState(),[o,h]=r.useState("000000"),[g,f]=r.useState(),[p,m]=r.useState(),[j,b]=r.useState(),[y,v]=r.useState(),[w,R]=r.useState(),k=async()=>{var i;const t=await I();h((i=t==null?void 0:t.data)==null?void 0:i.result),u(t==null?void 0:t.data)};r.useEffect(()=>{k()},[]),r.useEffect(()=>{if(s)return s.on("resultNumbers",t=>{l(t)}),()=>{s.off("resultNumbers")}},[s]),r.useEffect(()=>{s&&s.on("result",t=>{f(""),m(""),b(""),v(""),R(""),k(),h(t.result),console.log(t)})},[s]);const N=()=>{var t;if(o)return e.jsx(e.Fragment,{children:(t=o==null?void 0:o.split(""))==null?void 0:t.map((i,A)=>e.jsx("div",{style:{padding:10,borderRadius:"50%",border:"2px solid #2e89ff",fontWeight:600,width:40,height:40},className:"c-flex-center",children:i},A))})},S=async()=>{const t={val1:g,val2:p,val3:j,val4:y,val5:w,session_id:parseInt(n.id)+parseInt(1)};try{const i=await V(t);(i==null?void 0:i.ok)===!0&&C("Thông báo","Đã chỉnh kết quả thành công","success"),console.log(i)}catch(i){C("Thông báo","Lỗi máy chủ","error"),console.log(i)}};return e.jsxs(a,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[e.jsx(a,{item:!0,xs:12,sx:{mb:-2.25},children:e.jsxs(c,{variant:"h5",children:["Phiên hiện tại: ",(n==null?void 0:n.session_id)||""]})}),e.jsx(a,{item:!0,xs:12,sm:6,md:12,lg:12,children:e.jsx("div",{style:{},children:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10},children:N()})})}),e.jsx(a,{item:!0,xs:12,sx:{mb:-2.25},children:e.jsxs(c,{variant:"h5",children:["Phiên kế tiếp: ",parseInt(n==null?void 0:n.session_id)+parseInt(1)||""]})}),e.jsx(a,{item:!0,xs:12,sx:{mb:-2.25},children:e.jsx(c,{variant:"h5",children:"Thời gian đến phiên kế tiếp "})}),e.jsx(a,{item:!0,xs:12,sm:6,md:12,lg:12,children:e.jsx(M,{countdown:d})}),e.jsx(a,{item:!0,xs:12,sx:{mb:-2.25},children:e.jsx(c,{variant:"h5",children:"Chỉnh kết quả phiên kế tiếp"})}),e.jsxs(a,{item:!0,xs:12,children:[e.jsxs("div",{className:"c-flex-center",style:{gap:10},children:[e.jsx("div",{style:{padding:10,borderRadius:"50%",border:"2px solid #2e89ff",fontWeight:600,width:40,height:40},className:"c-flex-center",children:e.jsx("input",{value:g,onChange:t=>f(t.target.value),maxLength:1,type:"text",style:{width:"100%",height:"100%",border:"none",outline:"none",textAlign:"center"}})}),e.jsx("div",{style:{padding:10,borderRadius:"50%",border:"2px solid #2e89ff",fontWeight:600,width:40,height:40},className:"c-flex-center",children:e.jsx("input",{value:p,onChange:t=>m(t.target.value),maxLength:1,type:"text",style:{width:"100%",height:"100%",border:"none",outline:"none",textAlign:"center"}})}),e.jsx("div",{style:{padding:10,borderRadius:"50%",border:"2px solid #2e89ff",fontWeight:600,width:40,height:40},className:"c-flex-center",children:e.jsx("input",{value:j,onChange:t=>b(t.target.value),maxLength:1,type:"text",style:{width:"100%",height:"100%",border:"none",outline:"none",textAlign:"center"}})}),e.jsx("div",{style:{padding:10,borderRadius:"50%",border:"2px solid #2e89ff",fontWeight:600,width:40,height:40},className:"c-flex-center",children:e.jsx("input",{value:y,onChange:t=>v(t.target.value),maxLength:1,type:"text",style:{width:"100%",height:"100%",border:"none",outline:"none",textAlign:"center"}})}),e.jsx("div",{style:{padding:10,borderRadius:"50%",border:"2px solid #2e89ff",fontWeight:600,width:40,height:40},className:"c-flex-center",children:e.jsx("input",{maxLength:1,value:w,onChange:t=>R(t.target.value),type:"text",style:{width:"100%",height:"100%",border:"none",outline:"none",textAlign:"center"}})})]}),e.jsx("div",{className:"c-flex-center",style:{marginTop:12},children:e.jsx(E,{onClick:S,variant:"contained",children:"Chỉnh"})})]}),e.jsx(a,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}})]})}export{q as default};
